% Preamble
\documentclass[tikz,border=12pt,12pt]{standalone}
\input{style/sequence.tikz}
\input{vars/shortcuts.tex}

\begin{document}
\begin{tikzpicture}

% Body
  % Participants
  \node[pt2] at (0,1.5) {capture (Request)};
   \node[pt3] at (10,1.5) {capture (Response)};
    \node[pt4] at (20,1.5) {void-capture (Request)};
     \node[pt1] at (30,1.5) {void-capture (Response)};
                      
 			 % Aid Lines
  			\draw[line_night] (0,0) -- (0,-8);
  			\draw[line_nightsky] (10,0) -- (10,-8);
 			\draw[line_sky] (20,0) -- (20,-8);
  			\draw[line_mulberry] (30,0) -- (30,-8);
  
                      % Nodes
                      \fill[night] (-0.1,-2.9) rectangle (0.1,-3.6);
                      \fill[nightsky] (9.9,-3.15) rectangle (10.1,-3.85);
                      \fill[sky] (19.9,-3.65) rectangle (20.1,-4.35);
                      \fill[mulberry] (29.9,-4.15) rectangle (30.1,-7.15);
                      
                      
                      % Arrows & Text
                      \draw[solidarrow, txt, text width=9cm]
                      	(0.2,-3.25) -- node[midway,above] {1 Start \\ \texttt{<requested-amount currency="EUR">20.00 \\ </requested-amount>}} (9.8,-3.25);
                      \draw[solidarrow, txt]
                      	(10.2,-3.75) -- node[midway,above] {2 \\ \texttt{<transaction-id>12345 \\ </transaction-id>}} (19.8,-3.75);
                      \draw[solidarrow, txt]
                      	(20.2,-4.25) -- node[midway,above] {3 \\ \texttt{<parent-transaction-id>12345 \\ </parent-transaction-id>}} (29.8,-4.25);
                      \draw[solidarrow, txt, text width=9cm]
                      	(30.2,-4.25) -- (30.4,-4.25) -- node[midway,right] {4 End \\ \texttt{<requested-amount currency="EUR">20.00 \\ </requested-amount>}} (30.4,-5.75);
                      		\draw[txt, gray, dashed, ]
                      			(30.4,-5.95) -- node[midway,below=0.7cm, right=-4.15cm] {Funds are not transferred \\ from consumer account} (38.75,-5.95);
                      
\end{tikzpicture}
\end{document}
